2000-10-16 11:21  Scott James Remnant <scott@netsplit.com>

	* src/: irc_prot.c, irc_server.c: Fixed the null from problem with
	NOTICE/PRIVMSGs and the %s vulnerability in logging of notices

2000-10-10 13:42  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version now 0.7.5

2000-10-10 13:32  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, configure.in: Version 0.7.4 released.

2000-10-10 13:17  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Fixed a bug where I was sending a MODE without
	a nickname to restore user mode after restoring the server
	connection.  Meant you got weird "+i No such channel" errors
	sometimes.

2000-09-27 16:56  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, NEWS, TODO: Version 0.7.3 released.

2000-09-27 16:45  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc, doc/dircproxy.1, src/irc_client.c,
	src/irc_net.h, src/irc_server.c: Changed the way that stoned server
	checking works.  Instead of measuring times between PINGs from
	server, do our own PINGs and measure time between the PONGs we get
	back.

2000-09-27 16:11  Scott James Remnant <scott@netsplit.com>

	* src/memdebug.c: Heh, that pesky memory leak turned out to be in
	memdebug.c itself, forgot to free ms->file

2000-09-27 12:11  Scott James Remnant <scott@netsplit.com>

	* TODO: More stuff

2000-09-26 15:10  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc: Spaced out a bit more for legibility

2000-09-26 15:07  Scott James Remnant <scott@netsplit.com>

	* TODO: More stuff for 0.8 - its gonna be a big release

2000-09-26 13:24  Scott James Remnant <scott@netsplit.com>

	* RFC1413: Added the ident RFC, because 0.8 will have its own
	miniature identd daemon with it.

2000-09-26 12:13  Scott James Remnant <scott@netsplit.com>

	* TODO: TODO changes

2000-09-26 11:52  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Forced QUITs (as apposed to user quits) generate
	different error messages

2000-09-26 11:51  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, irc_net.c, irc_server.c: Added a few more
	QUIT messages, to make sure we never leave the server with "EOF
	from client" if we can help it.  Each message is *slightly*
	different to aid debugging.

2000-09-26 11:45  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, main.c: Finally found the course of the
	"missing QUIT message" problem.  Turned out to be me closing the
	client socket before the server socket (which automatically closes
	the server socket - thus the GETFL error too).

2000-09-26 11:31  Scott James Remnant <scott@netsplit.com>

	* src/cfgfile.c: Forgot to change a line to enable the config file
	directive

2000-09-26 10:58  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc, doc/dircproxy.1, src/cfgfile.c,
	src/dircproxy.h, src/irc_client.c, src/irc_net.h: New config file
	option that sets die_on_close to 1 if set to yes.  Basically means
	that you can use dircproxy without its detachable bit now.

2000-09-25 12:24  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version now 0.7.3.

2000-09-25 12:16  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, NEWS, TODO: Version 0.7.2 released.

2000-09-18 10:07  Scott James Remnant <scott@netsplit.com>

	* src/main.c: listen_port problem should return 3 [ port error ]
	not 2 [ config error ] from main.

2000-09-18 10:06  Scott James Remnant <scott@netsplit.com>

	* src/main.c: The ~/.dircproxyrc file should only be able to be
	read/write/exec by the user.  It has passwords in it.
	
	We don't make the same restrictions for the others though.
	
	thanks to: Scott Bronson <bronson@trestle.com>

2000-09-18 09:54  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: [ Bug #114688 ] Need to break out of the big
	while() loop as well if we get a matching mask list, otherwise we
	never report success.

2000-09-14 12:27  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version now 0.7.2.

2000-09-14 12:14  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, NEWS: Version 0.7.1 released.

2000-09-14 12:07  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: [ Bug #114352 ] Thought dircproxy had none of
	these pesky format string problems, but one slipped through in the
	late stages.  Oops.

2000-09-04 13:56  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc, doc/dircproxy.1: Cleared up the documentation
	to state that drop_modes 0 *doesn't* unset this option.

2000-09-04 13:39  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Removal of a mode flag when p->modes is 0
	resulted in core dump.	Fixed this by checking p->modes is set
	BEFORE doing a strchr() on it.

2000-09-04 13:22  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Only do log spinning if log->maxlines isn't 0
	(duh!)

2000-09-01 14:11  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version now 0.7.1

2000-09-01 13:40  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, NEWS, README, TODO: Version 0.7.0 released.

2000-09-01 12:58  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.c: Need string.h

2000-09-01 12:47  Scott James Remnant <scott@netsplit.com>

	* contrib/crypt.c: Also include string.h

2000-09-01 12:47  Scott James Remnant <scott@netsplit.com>

	* contrib/crypt.c: Oops, put the #else in the wrong place

2000-09-01 12:19  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Only replace / its not worth replacing ., just
	makes it harder to find the logs

2000-09-01 12:17  Scott James Remnant <scott@netsplit.com>

	* doc/dircproxy.1: Added config file documentation to the man page
	of muchness

2000-09-01 12:16  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.h: New member for stoned checking and log spinning

2000-09-01 12:15  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc, src/cfgfile.c, src/dircproxy.h,
	src/irc_server.c: Check for stoned servers

2000-09-01 12:13  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Put the sick puppy log spin code in

2000-09-01 12:13  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Pure sugar, say "all" if we're gonna recall the
	whole file cause its small enough

2000-09-01 12:07  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Can't use the local config file in inetd mode

2000-09-01 12:05  Scott James Remnant <scott@netsplit.com>

	* README.inetd: Fixed up the text now that /DIRCPROXY PERSIT exists
	for those inetders

2000-08-31 15:36  Scott James Remnant <scott@netsplit.com>

	* TODO: Almost there ...

2000-08-31 15:34  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Seperated the code to detach a user from
	ircclient_data()
	
	Fixed the 416/461 swapped numeric typo.
	
	Removed the /DQUIT command and added the /DIRCPROXY command in all
	of its glory.
	
	Neatened motd output

2000-08-31 15:32  Scott James Remnant <scott@netsplit.com>

	* src/: irc_net.c, irc_net.h: Fixed up the dedicate routines to
	make them work sweeter

2000-08-31 15:30  Scott James Remnant <scott@netsplit.com>

	* src/: irc_log.c, irc_log.h: Added the code to do manual log file
	recollection

2000-08-31 15:26  Scott James Remnant <scott@netsplit.com>

	* src/: Makefile.am, help.h: Added in the help text for the
	/DIRCPROXY HELP command

2000-08-30 14:25  Scott James Remnant <scott@netsplit.com>

	* TODO, src/irc_log.c: Recall everything/nothing code added

2000-08-30 14:17  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Only log the disconnection if they were active
	and authenticated

2000-08-30 14:03  Scott James Remnant <scott@netsplit.com>

	* src/cfgfile.c: Oops, accidental ` in the code

2000-08-30 13:41  Scott James Remnant <scott@netsplit.com>

	* contrib/crypt.c: Return a value from main()

2000-08-30 13:40  Scott James Remnant <scott@netsplit.com>

	* contrib/Makefile.am: Oops had a typo

2000-08-30 13:40  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Moved this message below the close()

2000-08-30 13:39  Scott James Remnant <scott@netsplit.com>

	* Makefile.am, configure.in: Added the contrib subdir

2000-08-30 13:30  Scott James Remnant <scott@netsplit.com>

	* contrib/crypt.c: Added new crypt program

2000-08-30 13:14  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Extra comment for clarity

2000-08-30 13:13  Scott James Remnant <scott@netsplit.com>

	* contrib/: .cvsignore, Makefile.am: Added a contrib directory that
	will have the simple "crypt" program in it.

2000-08-30 13:09  Scott James Remnant <scott@netsplit.com>

	* TODO: Not much left to do now (yay!)

2000-08-30 13:09  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Added in the code to actually send log stuff to
	the client

2000-08-30 12:29  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Include crypt.h after dircproxy.h to ensure we
	get configure info

2000-08-30 11:56  Scott James Remnant <scott@netsplit.com>

	* configure.in, src/irc_client.c: Some unixen put crypt() in
	crypt.h, others in unistd.h

2000-08-30 11:37  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Don't check whether the log file is open (it
	might not be), just check it has a filename.  And to recall, just
	do it and worry later.

2000-08-30 11:36  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Don't check we have a conn_class, its a
	programming error to call irc_log without one - let it core dump
	and let the bug show

2000-08-30 10:57  Scott James Remnant <scott@netsplit.com>

	* TODO, src/irc_log.c: Quite a few changes to the log code.  Making
	sure that we have a conn_class is probably a good idea, also fixed
	the fact that the other log got our nickname as a filename!
	
	Made irclog_free() and irclog_close() do slightly different things
	(close just closes the file handle, free actually unlinks and
	free's memory).  This is so we can do log->nlines while the user is
	online for !always log files.
	
	Also added the recall code, all except the bit that sends stuff to
	the user.

2000-08-30 10:54  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, irc_net.h: Added a quick time_t to ircproxy
	so we know when a proxy session began.	Display in the 003 header
	sent to the client in place of "(unknown)" we had before.

2000-08-30 10:53  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, irc_net.h, irc_server.c: Added a flag so that
	if the user uses the /MOTD we don't squelch the reply from them. 
	We still squelch any other MOTD that comes from the server though.

2000-08-30 10:51  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Was using conn_class at a pre-authentication
	point without actually checking the client was active.

2000-08-30 10:48  Scott James Remnant <scott@netsplit.com>

	* src/: dircproxy.h, irc_net.c, irc_net.h, main.c: We've only got 1
	global variable left now, the list of connection classes.  The rest
	are all static to whatever .c file uses it.  At the same time added
	the defaults for motd_* to dircproxy.h

2000-08-30 10:42  Scott James Remnant <scott@netsplit.com>

	* src/Makefile.am: Added logo.h to the compilation

2000-08-30 10:41  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc, src/cfgfile.c, src/irc_client.c, src/irc_net.h,
	src/logo.h: Made the message of the day stats optional, and at the
	same time added some code to display a l33t "dircproxy" logo if
	they want.

2000-08-29 11:12  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, irc_log.c, irc_log.h, irc_net.c, irc_net.h,
	irc_server.c: New log code is in place, and modified all the other
	bits of code to use the new log code.  Also a few modifications to
	use local_address and away_message properly.

2000-08-29 11:10  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc, src/cfgfile.c, src/dircproxy.h, src/main.c:
	Rewrote the log file a bit, and changed the way cfgfile.c works a
	bit.  Made local_address and away_message global options, and added
	in all the new log-related options.  Finally got rid of
	log_autorecall global variable at the same time.  Also by using
	error() instead of printing directly to standard out, may have
	removed the need for the progname global.

2000-08-29 11:04  Scott James Remnant <scott@netsplit.com>

	* TODO: Updated the todo file

2000-08-29 11:03  Scott James Remnant <scott@netsplit.com>

	* RELEASING: Modified to take into account features list and things

2000-08-29 10:45  Scott James Remnant <scott@netsplit.com>

	* TODO, src/dircproxy.h, src/irc_client.c, src/irc_net.c,
	src/irc_net.h, src/main.c: Added code to reload configuration file
	on a HUP.  Does pretty well everything including kicking off users
	who's passwords have changed, changing the listen port etc.  Only
	thing it doesn't do is move any open log files, but thats an icky
	thing to do anyway imho.

2000-08-29 10:42  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc, src/cfgfile.c, src/dircproxy.h,
	src/irc_client.c, src/irc_net.c, src/irc_net.h: Added new
	drop_modes configuration option to drop user modes on detach.

2000-08-29 10:42  Scott James Remnant <scott@netsplit.com>

	* TODO: Added a new drop_modes config file option for security and
	niceness.

2000-08-29 10:37  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc: Added a note about passwords being encrypted

2000-08-29 10:34  Scott James Remnant <scott@netsplit.com>

	* TODO, conf/dircproxyrc, src/cfgfile.c, src/dircproxy.h,
	src/irc_client.c, src/irc_net.h: Added code and configuration
	option to choose between disconnecting an existing user or denying
	an attempt connect.
	
	At the same time added a new boolean configuration type that can be
	yes/true/y/t/1/no/false/n/f/0 and sets an int to 1 or 0

2000-08-25 10:52  Scott James Remnant <scott@netsplit.com>

	* RELEASING: Added instruction to copy to ftp

2000-08-25 10:05  Scott James Remnant <scott@netsplit.com>

	* RELEASING: Added note about running build-site.pl to update the
	website

2000-08-25 09:57  Scott James Remnant <scott@netsplit.com>

	* TODO: Ooh, TODO file is getting smaller now

2000-08-25 09:56  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc: Updated the configuration file to fit the new
	config stuff

2000-08-25 09:56  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Use PACKAGE ('dircproxy') not progname
	('../dircproxy-binary') for syslog

2000-08-25 09:54  Scott James Remnant <scott@netsplit.com>

	* src/main.c: We must use syslog as soon as possible with inetd

2000-08-25 09:50  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Actually check a channel existed before
	announcing we couldn't rejoin.	I think that a re-use of a "bad
	channel" numeric is causing the "Cannot rejoin +iw" bug, but even
	if its not its a good place to start.

2000-08-25 09:49  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Added the code to seperate the server password
	from the server string, and send it to the server when we connect.

2000-08-25 09:47  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.c: Use a static function to make a listening port,
	avoids duplication of that rather specialist code.  This is called
	by both ircnet_listen and ircnet_dedicate() and only binds if a
	local_addr is given.

2000-08-25 09:46  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Changed the start order to make it a little more
	realistic

2000-08-25 09:43  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Changed the config file order to alphabetical

2000-08-25 09:42  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Argh!  Bloody patch, I knew there was something up
	with it.

2000-08-25 09:38  Scott James Remnant <scott@netsplit.com>

	* src/: dircproxy.h, irc_client.c, irc_log.c, irc_net.c,
	irc_server.c, main.c, sock.c, sprintf.c: Got rid of the
	DEBUG_SYSCALL_FAIL, DEBUG_SYSCALL_DOH macros and replaced them with
	a simple syscall_fail() function.  Also added a debug() function to
	replace all those #ifdef DEBUG/printf things lying around.  This
	meant adding a couple of headers to a few files too.

2000-08-25 09:26  Scott James Remnant <scott@netsplit.com>

	* src/: irc_net.c, irc_net.h: Added a 'serverpassword' member to
	ircproxy

2000-08-25 09:20  Scott James Remnant <scott@netsplit.com>

	* src/dns.c: Check port has a length.  'server irc.foo:' now means
	use default port, not 0.  This is necessary so that '::' works
	(default port, but with password).

2000-08-25 09:19  Scott James Remnant <scott@netsplit.com>

	* src/cfgfile.c: Adjusted the documentation for server, because
	thats gonna be able to have passwords in for the server

2000-08-25 09:15  Scott James Remnant <scott@netsplit.com>

	* doc/dircproxy.1: Rearranged the man page so the options are in
	alphaspaghettical order.

2000-08-24 12:42  Scott James Remnant <scott@netsplit.com>

	* .cvsignore: COPYING is in cvs ... don't ignore it.

2000-08-24 11:36  Scott James Remnant <scott@netsplit.com>

	* COPYING: Physically adding the GNU GPL to the source, its
	automatically included by automake anyway, but I don't really want
	people downloading the CVS without a license, or people's own
	automake's applying a different license.
	
	Everything says its GPL anyway *but* this is just for safety and
	stuff.

2000-08-24 11:33  Scott James Remnant <scott@netsplit.com>

	* configure.in: There's sufficient changes so far to warrant a new
	version jump, although not everything I want is in yet.  CVS
	version now 0.7.0.

2000-08-24 11:32  Scott James Remnant <scott@netsplit.com>

	* TODO: TODO changes.

2000-08-24 11:25  Scott James Remnant <scott@netsplit.com>

	* src/: cfgfile.c, cfgfile.h, dircproxy.h, main.c: listen_port
	isn't a global variable anymore (yay!)	This means the global
	variables have now been cut right down to essential state
	information (in_background, dedicated_proxy, progname) and the list
	of connection classes (*might* be able to get rid of this last one,
	with any luck)
	
	There's the log_autorecall one lagging still, but thats going with
	the new log code, so I'm not bothering about it right now.

2000-08-24 11:22  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.c: Adjusted the ircnet_listen() function so it
	doesn't close an existing listening socket until its absolutely
	sure that the new listening socket is working perfectly.  This'll
	be handy for a HUP if they change the socket we're listening on.

2000-08-24 11:10  Scott James Remnant <scott@netsplit.com>

	* src/: cfgfile.c, dircproxy.h, irc_net.h, irc_server.c, main.c:
	Nearly all options in a config file (except listen_port) can be
	listed in a connection { } now, providing even more customisability
	per connection class.  The ones in the body *above it* are used as
	defaults (below serve as defaults for any further connection
	classes).  This means that all the globals have gone, and are now
	just members of struct ircconnclass.

2000-08-24 11:08  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.c: Call sock_close() instead of close() just in case.
	 Also ensure we close sockets when freeing a proxy (like when
	SIGTERM or SIGINT is sent).
	
	Due to changes in config file, look for all variables under
	conn_class now (except listen_port), and don't bother with checking
	awaymessage isn't -1.

2000-08-24 09:17  Scott James Remnant <scott@netsplit.com>

	* doc/dircproxy.1: Made the man page even more spiffy, just gotta
	document the configuraton file options (which are changing soon
	anyway!).

2000-08-24 09:15  Scott James Remnant <scott@netsplit.com>

	* src/sock.c: Fixed a memory leak if a send() failed to the server.

2000-08-23 14:30  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Only do mem_report stuff if DEBUG_MEMORY is defined,
	although this is generally defined with DEBUG it *might* not be ...

2000-08-23 14:13  Scott James Remnant <scott@netsplit.com>

	* src/Makefile.am: dircproxy binary is now installed in 'bin'

2000-08-23 13:38  Scott James Remnant <scott@netsplit.com>

	* doc/dircproxy.1: Neatened the options and added the homepage

2000-08-23 13:34  Scott James Remnant <scott@netsplit.com>

	* doc/dircproxy.1: Made the man page a .1

2000-08-23 13:34  Scott James Remnant <scott@netsplit.com>

	* doc/: Makefile.am, dircproxy.1: Just had a bit of a decision
	change.  dircproxy is now installed under "bin" not "sbin", this
	means the man page is a .1 as well.

2000-08-23 13:30  Scott James Remnant <scott@netsplit.com>

	* doc/: Makefile.am, dircproxy.1: As dircproxy gets installed in
	sbin it should be an (8) man page.

2000-08-23 13:25  Scott James Remnant <scott@netsplit.com>

	* Makefile.am, configure.in, doc/.cvsignore, doc/Makefile.am,
	doc/dircproxy.1: I figured out how to do it finally and wrote a
	quick man page for dircproxy.  Its not complete, but is pretty good
	by man page standards.

2000-08-23 11:48  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Changed the password code to make it compile
	without warnings, actually #ifdef'ing out the "if" statement now
	instead of magic with pointers.

2000-08-23 11:47  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, irc_client.h, irc_net.c, irc_net.h: Moved the
	dedicated_proxy code itself out of irc_client, and into irc_net. 
	Added the function to actually dedicate the proxy to one particular
	proxy session, and also added function to announce if we're not
	listening for connections.

2000-08-23 11:43  Scott James Remnant <scott@netsplit.com>

	* src/: dircproxy.h, irc_net.c, irc_net.h, main.c: Moved the
	definition of dedicated_proxy from main to irc_net, as its a bit
	more suitable there.  Also made it a simple boolean, not a port,
	because code in irc_net can check the listen_sock itself.

2000-08-23 11:39  Scott James Remnant <scott@netsplit.com>

	* configure.in: Added check for crypt() function in default library
	and in -lcrypt too.

2000-08-23 11:38  Scott James Remnant <scott@netsplit.com>

	* README: Spiffy new readme file

2000-08-23 11:38  Scott James Remnant <scott@netsplit.com>

	* TODO: More stuff todo

2000-08-22 17:09  Scott James Remnant <scott@netsplit.com>

	* TODO: More TODO

2000-08-22 16:37  Scott James Remnant <scott@netsplit.com>

	* TODO: More stuff to do *sigh*

2000-08-22 13:08  Scott James Remnant <scott@netsplit.com>

	* TODO, src/irc_client.c, src/irc_client.h, src/main.c: Put in the
	code to announce on attach if we're a dedicated proxy.

2000-08-22 12:55  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Running under inetd means we're backgrounded

2000-08-22 12:54  Scott James Remnant <scott@netsplit.com>

	* RFC1459, RFC2810, RFC2811, RFC2812, RFC2813: Added the RFCs to
	CVS so that they are in the developer source, comes in handy for
	me.

2000-08-22 12:46  Scott James Remnant <scott@netsplit.com>

	* src/: dircproxy.h, main.c: New "dedicated_proxy" variable.  Set
	this to be a port number other than 0 if we're a listening daemon
	on a non-standard port that only has one connection class.
	
	(For those people running from inetd or under the planned "user"
	directive)

2000-08-21 14:54  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Added variable to say whether we're in the background
	or not

2000-08-21 14:54  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Moved the "join hook" stuff so its activated by
	a 004, and not by the end of a motd.  (Mainly so /motd doesn't
	trigger it :o)

2000-08-21 14:53  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Passwords in the config file are now encrypted
	using crypt(), so use that to compare passwords.

2000-08-21 14:53  Scott James Remnant <scott@netsplit.com>

	* src/: dircproxy.h, irc_prot.h: Moved the OLD_RFC1459_PARAM_SPACE
	definition to dircproxy.h to keep it with the rest of the config
	stuff.
	
	Added a new config directive which says to use encrypted passwords,
	so people can undef it if they want smaff to kill them.

2000-08-21 14:38  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc: Fixed a documentation typo

2000-08-21 14:38  Scott James Remnant <scott@netsplit.com>

	* TODO: updated todo file

2000-08-21 14:37  Scott James Remnant <scott@netsplit.com>

	* PROTOCOL: Bit of a rewrite of this to make it nicer

2000-08-21 14:36  Scott James Remnant <scott@netsplit.com>

	* NEWS: Added copyright

2000-08-21 14:34  Scott James Remnant <scott@netsplit.com>

	* AUTHORS, INSTALL: Spell checked and fmt'd

2000-08-18 09:20  Scott James Remnant <scott@netsplit.com>

	* .cvsignore, INSTALL: Added new custom INSTALLation documentation,
	instead of the default autoconf documentation.	Removed INSTALL
	from .cvsignore so we could commit it :o)

2000-08-18 09:20  Scott James Remnant <scott@netsplit.com>

	* AUTHORS: Doing a bit of a documentation re-work, so changed the
	AUTHORS file.

2000-08-17 16:52  Scott James Remnant <scott@netsplit.com>

	* AUTHORS, AUTHORS.map: Removed Stephen as an active developer,
	still kept the credit for work on documentation.

2000-08-17 15:19  Scott James Remnant <scott@netsplit.com>

	* conf/dircproxyrc: Realised that the listen_port config file
	directive has never been in the config file, despite the fact its
	available.  Added it, so people don't have to edit dircproxy.h to
	change the listening port (not that they did anyway)

2000-08-17 15:03  Scott James Remnant <scott@netsplit.com>

	* src/dircproxy.h: Header file documentation was a bit wrong

2000-08-16 16:12  Scott James Remnant <scott@netsplit.com>

	* TODO: Amended the TODO list

2000-08-16 15:41  Scott James Remnant <scott@netsplit.com>

	* src/dircproxy.h: Changed filename of system dircproxy config file
	to dircproxyrc from dircproxy.conf

2000-08-16 15:40  Scott James Remnant <scott@netsplit.com>

	* conf/: Makefile.am, dircproxyrc: Changed the name of the default
	configuration file to dircproxyrc, this will be the name of the
	file wherever it goes (to avoid confusion)

2000-06-28 12:41  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: [ Bug #108464 ] The character replacement was
	replacing : with :, when it should have been replacing / with :. 
	Oops.

2000-06-26 16:34  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version now 0.6.3

2000-06-26 16:24  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, NEWS: Version 0.6.2 released.

2000-06-26 16:21  Scott James Remnant <scott@netsplit.com>

	* conf/Makefile.am: Adjusted these files so they reflect the way
	things now are.  this file goes in share and isn't automatically
	installed.

2000-06-20 13:41  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Missed a space in the help text.

2000-06-20 13:40  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Fixed the --help which was wrong

2000-06-20 13:34  Scott James Remnant <scott@netsplit.com>

	* README: Added Debian to the list too

2000-05-29 12:05  Scott James Remnant <scott@netsplit.com>

	* AUTHORS, AUTHORS.map: Added Stephen Cope to the AUTHORS files,
	credited for documenting this thing.

2000-05-27 18:17  Scott James Remnant <scott@netsplit.com>

	* README: Played with the VA compile farm, and added all the other
	architectures it offers to this list as its compiled on them all.

2000-05-27 18:02  Scott James Remnant <scott@netsplit.com>

	* README: Added ia64 to the list of platforms, since I got access
	to the ones at VA.

2000-05-25 22:23  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Changed the logic behind the config file loading a
	bit.  Now if one isn't explicitly specified, it'll use a
	~/.dircproxyrc.  If that doesn't exist it will use
	/etc/dircproxy.conf.  This removed the need for -G.
	
	Also fixed missing options on --config-file= and --port= and made
	-P/--port override the config file

2000-05-25 22:20  Scott James Remnant <scott@netsplit.com>

	* src/cfgfile.c: Removed fopen() error message, because we don't
	want to know!

2000-05-25 18:15  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Checking the wrong parameter of a 437... doh!

2000-05-25 14:17  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version now 0.6.2

2000-05-25 14:07  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, NEWS: Version 0.6.1 released.

2000-05-25 14:00  Scott James Remnant <scott@netsplit.com>

	* src/cfgfile.c: Heh who'd have thought an extra semi-colon could
	cause a nasty core dump.

2000-05-25 13:59  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, memdebug.c: MIN() seems to be defined all
	over the place on different platforms.	Just define it here, its
	not hard.

2000-05-25 13:58  Scott James Remnant <scott@netsplit.com>

	* README: Added Solaris 2.7 to the platforms list seeing as I have
	an account on one now to test this on.

2000-05-24 22:21  Scott James Remnant <scott@netsplit.com>

	* src/cfgfile.c: Argh! > didn't do what I expected here.  This is
	one of those nasty "post release" bugs that causes the thing to
	core dump

2000-05-24 22:19  Scott James Remnant <scott@netsplit.com>

	* README: Added FreeBSD 3.4 to this, because I have it running on
	that too

2000-05-24 22:04  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version now 0.6.1

2000-05-24 21:46  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, NEWS: Version 0.6.0 released.

2000-05-24 21:29  Scott James Remnant <scott@netsplit.com>

	* src/dircproxy.h: Changed the default rejoin to 15 seconds

2000-05-24 21:29  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Oops, ignored the listen_port config variable

2000-05-24 21:26  Scott James Remnant <scott@netsplit.com>

	* TODO: Updated the todo

2000-05-24 21:21  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, irc_net.c, irc_net.h: Added code so that an
	inetd socket doesn't linger

2000-05-24 21:08  Scott James Remnant <scott@netsplit.com>

	* TODO: Updated the TODO file

2000-05-24 21:06  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Close cleanly on a ^C

2000-05-24 21:03  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Use 'dircproxy' as the source of notices

2000-05-24 21:02  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: I use notice to notify of nasty system things,
	so I might as well make it come from dircproxy itself.

2000-05-24 20:58  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Oops, msg.cmd is a string not an integer

2000-05-24 20:58  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Neatened the motd output

2000-05-24 20:54  Scott James Remnant <scott@netsplit.com>

	* src/cfgfile.c: Fixed it so it doesn't add the server list
	backwards

2000-05-24 20:53  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.c: Fixed the bug where you are rejoined to channels
	in the opposite order to that which you joined them

2000-05-24 20:50  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Fixed the output so it doesn't keep repeating
	itself

2000-05-24 20:48  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.c: Bit of a bug, forgot to increment l, so if you got
	kicked the last channel you joined, it kinda forgot about the rest
	(oops)

2000-05-24 20:48  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Whoa, scary, I wasn't freeing any log memory -
	talk about memleak! sheesh!

2000-05-24 20:47  Scott James Remnant <scott@netsplit.com>

	* src/memdebug.c: Copied across the neatening from maestro -
	specifically this adds a little bit of code to show what is stored
	in the memory still allocated

2000-05-24 20:31  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Fixed a couple of typo-bugs

2000-05-24 20:30  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.h: Removed dead function definition

2000-05-24 20:29  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Added code for non-recoverable JOIN errors

2000-05-24 20:25  Scott James Remnant <scott@netsplit.com>

	* src/irc_server.c: Removed the auto-rejoin code (its in irc_net.c
	now)
	
	Made a special case for the 437 numeric, because it can be either
	nickname or channel related.
	
	Added code so that while a client is detached, we attempt to rejoin
	channels if its full/invite only/banned/juped
	
	Also on join, we can reactive a channel, and then spool the log
	back to the client (in case of kick).

2000-05-24 20:22  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Make log directory on successful first auth now
	- much better place to do it.  Also make the misclog when we loose
	the client.
	
	Added code to spool stats about sizes of log files and channels
	user was on in the message of the day

2000-05-24 20:20  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.c: Moved the code to rejoin channels automatically to
	here.
	
	Moved the misclog code about, this log only gets created when the
	user disconnects now and then is removed when they connect.

2000-05-24 20:18  Scott James Remnant <scott@netsplit.com>

	* src/irc_net.h: New 'inactive' variable for channels.	This is set
	to 1 when we are removed from the channel while a client isn't
	connected.  All the time this is one we attempt to rejoin the
	channel every few seconds until the join is successfull or the
	client comes back.

2000-05-24 20:17  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: When closing a log, make sure we set 'open' to 0

2000-05-24 19:11  Scott James Remnant <scott@netsplit.com>

	* src/sprintf.c: Need to have some memory allocated to avoid buffer
	underruns, also need to null terminate after strncpy()

2000-05-24 19:05  Scott James Remnant <scott@netsplit.com>

	* src/sprintf.c: Fixed a few bugs

2000-05-24 19:02  Scott James Remnant <scott@netsplit.com>

	* src/sprintf.c: Added in an (almost) complete implementation of
	vsprintf()

2000-05-24 19:01  Scott James Remnant <scott@netsplit.com>

	* configure.in: When in debug mode, don't even detect vsnprintf(),
	use our own implementation of vsprintf()

2000-05-24 18:30  Scott James Remnant <scott@netsplit.com>

	* configure.in: [ Bug #106153 ] compiler error, partial make fix
	
	Added check to see whether socket() is in -lsocket and whether
	gethostbyname() is in -lnsl

2000-05-24 18:18  Scott James Remnant <scott@netsplit.com>

	* README: There is a config file now :o)

2000-05-24 18:09  Scott James Remnant <scott@netsplit.com>

	* TODO: Updated the TODO file with whats left to do

2000-05-24 18:05  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, irc_log.c, irc_prot.c, irc_server.c,
	timers.c: Removed a lot of the printf() debug code, that which I
	still want to see I've placed inside #ifdef DEBUG stuff

2000-05-24 17:57  Scott James Remnant <scott@netsplit.com>

	* src/: irc_client.c, irc_net.h, irc_server.c: Took out all the
	hacky defines and replaced them with the nice sexy config file
	variables

2000-05-24 17:52  Scott James Remnant <scott@netsplit.com>

	* src/: irc_net.c, irc_net.h: Added new function to clean up a
	connection class structure, and made expunge clean them up too

2000-05-24 17:45  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Whoohoo, lets read some config file baby!

2000-05-24 17:42  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Changed the command line options a bit, especially
	added checks whether to use the global config file or not, and
	alternate local config file.  I've decided not to do all the -p/-s
	stuff because it'll show up in a 'ps' list which isn't a good idea!

2000-05-24 17:39  Scott James Remnant <scott@netsplit.com>

	* src/: dircproxy.h, main.c: Added the global variables and
	initialise them to the values in dircproxy.h Removed those horrid
	TODO_CFG things finally

2000-05-24 17:34  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Using an ALARM single to stop the main loop was
	pretty pointless, might as well just use the TERM signal which will
	let dircproxy clean itself up if its 'kill'd

2000-05-24 17:31  Scott James Remnant <scott@netsplit.com>

	* src/dircproxy.h: Fixed a mistake in the comments

2000-05-24 17:30  Scott James Remnant <scott@netsplit.com>

	* src/: Makefile.am, dircproxy.h: Added some defines to set the
	name and locations of the configuration files

2000-05-24 17:28  Scott James Remnant <scott@netsplit.com>

	* src/Makefile.am: Added the new cfgfile.c and .h files to the
	Makefile

2000-05-24 17:23  Scott James Remnant <scott@netsplit.com>

	* configure.in: Changing CVS version to 0.6.0 seeing as thats the
	version I said the config file code would be in

2000-05-24 17:22  Scott James Remnant <scott@netsplit.com>

	* Makefile.am, configure.in: Added the new conf directory to
	Makefile.am and configure.in

2000-05-24 17:18  Scott James Remnant <scott@netsplit.com>

	* src/: cfgfile.c, cfgfile.h: Wrote the code to read in a
	configuration file

2000-05-24 17:16  Scott James Remnant <scott@netsplit.com>

	* conf/: .cvsignore, Makefile.am: Written the default configuration
	files, and everything.	So adding them to CVS :o)

2000-05-24 12:38  Scott James Remnant <scott@netsplit.com>

	* TODO: More stuff todo, gonna work on a lot of this today

2000-05-14 20:56  Scott James Remnant <scott@netsplit.com>

	* TODO: Updated the TODO file based on user-feedback and my own
	grudges

2000-05-14 20:55  Scott James Remnant <scott@netsplit.com>

	* README: Added a quick meme that there is no config file at the
	moment ...
	
	Also fixed the bugs url so its not https

2000-05-13 17:05  Scott James Remnant <scott@netsplit.com>

	* AUTHORS.map, RELEASING: Added a file detailing the steps to do a
	new release, to make sure I do it right.  Also added the
	AUTHORS.map file cvs2cl.pl uses.

2000-05-13 16:20  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version becomes 0.5.5 (although potentially
	might be 0.6 if no more bugs appear and I can work on the config
	file).

2000-05-13 16:14  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, configure.in: Version 0.5.4 released.

2000-05-13 16:11  Scott James Remnant <scott@netsplit.com>

	* src/main.c: Logic on the -D option was wrong, should set
	no_daemon to 1.

2000-05-13 16:05  Scott James Remnant <scott@netsplit.com>

	* src/match.c: Requires sprintf.c because it uses strdup()

2000-05-13 16:04  Scott James Remnant <scott@netsplit.com>

	* configure.in, src/sprintf.c: If --enable-debug is set, we
	actually don't want to check for strdup(), that way we are only
	checking for vsnprintf() and the code at the top of sprintf.c isn't
	required.  (This gets rid of all those pesky "Free of illegal
	block" messages).

2000-05-13 15:47  Scott James Remnant <scott@netsplit.com>

	* ChangeLog, NEWS, TODO: Version 0.5.3 released.

2000-05-13 05:25  Scott James Remnant <scott@netsplit.com>

	* configure.in, src/dns.c, src/irc_client.c, src/irc_log.c,
	src/irc_net.c, src/irc_prot.c, src/irc_server.c, src/irc_string.c,
	src/match.c, src/sprintf.c, src/sprintf.h, src/timers.c: Using
	strdup() isn't entirely portably apparently, and also it pisses off
	memdebug.c something chronic.  Check for it in configure.in, and
	use it as x_strdup() everwhere.  If it does exist, x_strdup() is
	just a wrapper for strdup(), if it doesn't exist, or DEBUG_MEMORY
	is defined, then it does its own malloc/strcpy.

2000-05-13 05:12  Scott James Remnant <scott@netsplit.com>

	* src/: dircproxy.h, irc_client.c, irc_prot.c, irc_server.c,
	main.c: Made some of the TODO_CFG macros into the proper macros
	they will be as the defaults for the config file.  Gave them
	documentation too.
	
	Also added two FALLBACK defines for those things not in the config
	file that I/users might want to change

2000-05-13 04:43  Scott James Remnant <scott@netsplit.com>

	* src/.cvsignore: Added the name of the executable to the ignore
	file

2000-05-13 04:43  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: fchmod() doesn't take a FILE *, grrr.
	
	Changed to just chmod() the filename, seeing as we have that anyway

2000-05-13 04:41  Scott James Remnant <scott@netsplit.com>

	* src/: dns.c, irc_client.c, irc_log.c, irc_net.c, irc_prot.c,
	irc_server.c, irc_string.c, match.c, timers.c: Decided to embrace
	the fruit that is strdup() and in the process cleaned up a lot of
	code (yay!)

2000-05-13 04:23  Scott James Remnant <scott@netsplit.com>

	* src/irc_log.c: Heh, anyone on the machine could not only see what
	channels you were on, not only read everything on those channels,
	they could also read your private messages.
	
	This isn't good.  Made the dir be created 0700 and files 0600 now.

2000-05-13 04:17  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Set bind to 0 after strdup(), heh

2000-05-13 04:13  Scott James Remnant <scott@netsplit.com>

	* src/irc_client.c: Fixed a missing bracket problem that crept in
	and prevented compilation...  doh! damned "TODO" code

2000-05-13 04:07  Scott James Remnant <scott@netsplit.com>

	* src/sock.c: Made the calls to set/unset non blocking a bit more
	friendly.  Also we now block when doing a send() otherwise we loose
	data (doh!)

2000-05-13 02:38  Scott James Remnant <scott@netsplit.com>

	* src/dircproxy.h: PACKAGE and VERSION will always be defined in
	config.h unless something has really gone wrong, and that'll need
	fixing anyway.	Define them in the elsif to save code and make
	things look neeter.

2000-05-13 02:34  Scott James Remnant <scott@netsplit.com>

	* README, src/main.c: Changed the homepage and bug reporting
	locations now we're all fully sourceforge'd up

2000-05-13 02:28  Scott James Remnant <scott@netsplit.com>

	* configure.in: CVS version is 0.5.3

2000-05-13 02:23  Scott James Remnant <scott@netsplit.com>

	* .cvsignore, src/.cvsignore: Removed the FILES.autoconf file, and
	replaced it with a .cvsignore in each directory.  This means that
	'cvs update' etc will ignore any files generated by
	auto{conf,make}.  This is a good-thing.  Means you can run
	autogen.sh on your checked out version without it getting in the
	way of CVS.

2000-05-13 02:13  Scott James Remnant <scott@netsplit.com>

	* acconfig.h, autogen.sh, src/dns.h, src/match.h, src/sock.h,
	src/stringex.h, src/memdebug.h, src/irc_string.h, src/stringex.c,
	src/irc_server.h, src/timers.h, src/getopt.c, src/getopt.h,
	src/getopt1.c: Imported version 0.5.2 into the CVS tree.  Its in a
	CLEAN state that requires autoconf and automake (run autogen.sh) to
	build.
        

2000-05-13 02:13  Scott James Remnant <scott@netsplit.com>

	* AUTHORS, ChangeLog, Makefile.am, NEWS, PROTOCOL, README, TODO,
	README.inetd, configure.in, src/Makefile.am, src/dircproxy.h,
	src/dns.c, src/sock.c, src/irc_prot.c, src/main.c, src/match.c,
	src/sprintf.c, src/sprintf.h, src/irc_string.c, src/irc_net.c,
	src/irc_prot.h, src/irc_log.c, src/irc_log.h, src/irc_net.h,
	src/irc_client.c, src/irc_client.h, src/memdebug.c,
	src/irc_server.c, src/timers.c: Initial revision

